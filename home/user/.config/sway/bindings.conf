# vim: ft=swayconfig
# Sway bindings

bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +10% && pkill -RTMIN+1 i3blocks
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -10% && pkill -RTMIN+1 i3blocks
bindsym --locked XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle && pkill -RTMIN+1 i3blocks

bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioPause exec playerctl play-pause
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous

bindsym --locked XF86MonBrightnessUp exec xbacklight -inc 20
bindsym --locked XF86MonBrightnessDown exec xbacklight -dec 20


bindsym --to-code $mod+p exec pomodoro toggle && pkill -RTMIN+2 i3blocks

bindsym $mod+z exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ 0                        ## Hold to talk
bindsym --release $mod+z exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ 1              ## Release to mute

bindsym $mod+Shift+z exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

bindsym XF86PickupPhone exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ 0               ## Hold to talk
bindsym --release XF86PickupPhone exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ 1     ## Release to mute

bindsym XF86Go exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ 0                        ## Hold to talk, x1carb11
bindsym --release XF86Go exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ 1              ## Release to mute, x1carb11


bindsym $mod+XF86AudioMicMute exec --no-startup-id pactl list short sources | awk '/input.*RUNNING/ {system("pactl set-source-mute " $1 " toggle")}'     ## Find and mute mics

bindsym $mod+Return exec $terminal

bindsym --to-code $mod+s exec sway_swap_workspaces

bindsym --to-code $mod+Shift+q kill
bindsym --to-code $mod+Shift+r reload

set $menu rofi -show drun -m -1
bindsym --to-code $mod+d exec $menu
bindsym $mod+o exec --no-startup-id slm_rofi

# Change focus
bindsym --to-code $mod+h focus left
bindsym --to-code $mod+j focus down
bindsym --to-code $mod+k focus up
bindsym --to-code $mod+l focus right
bindsym --to-code $mod+Left focus left
bindsym --to-code $mod+Down focus down
bindsym --to-code $mod+Up focus up
bindsym --to-code $mod+Right focus right

# Move focused window
bindsym --to-code $mod+Shift+h move left
bindsym --to-code $mod+Shift+j move down
bindsym --to-code $mod+Shift+k move up
bindsym --to-code $mod+Shift+l move right
bindsym --to-code $mod+Shift+Left move left
bindsym --to-code $mod+Shift+Down move down
bindsym --to-code $mod+Shift+Up move up
bindsym --to-code $mod+Shift+Right move right


bindsym --to-code $mod+Ctrl+Shift+l move workspace to output right
bindsym --to-code $mod+Ctrl+Shift+h move workspace to output left
bindsym --to-code $mod+Ctrl+Shift+k move workspace to output up
bindsym --to-code $mod+Ctrl+Shift+j move workspace to output down


bindsym --to-code $mod+f fullscreen toggle

bindsym --to-code $mod+t layout tabbed
bindsym --to-code $mod+v layout toggle split
bindsym --to-code $mod+a focus parent

bindsym --to-code $mod+Shift+slash floating toggle
bindsym --to-code $mod+Shift+comma sticky toggle

bindsym --to-code Print exec --no-startup-id screenshot select copy
bindsym --to-code $mod+Print exec --no-startup-id screenshot window copy
bindsym --to-code Ctrl+Print exec --no-startup-id screenshot entire copy

bindsym --to-code Shift+Print exec --no-startup-id screenshot select save
bindsym --to-code Shift+$mod+Print exec --no-startup-id screenshot window save
bindsym --to-code Shift+Ctrl+Print exec --no-startup-id screenshot entire save


bindsym --to-code $mod+q exec swaymsg workspace hide1; workspace hide2


bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show


bindsym --to-code $mod+b bar mode toggle

set $exitmode "Power: [e]xit, [r]eboot, [s]hutdown, s[u]spend, [l]ock, [b]lack, [R]UEFI"
mode $exitmode {
    bindsym --to-code e exit
    bindsym --to-code r exec --no-startup-id reboot
    bindsym --to-code s exec --no-startup-id shutdown -h now
    bindsym --to-code u exec --no-startup-id systemctl suspend; mode "default"
    bindsym --to-code l exec swaylock -f; mode "default"
    bindsym --to-code b exec magick canvas:none PNG:- | feh --class black -YFx -; mode "default"
    bindsym --to-code Shift+r exec --no-startup-id systemctl reboot --firmware-setup

    bindsym Escape mode "default"
    bindsym Return mode "default"
}
bindsym --to-code $mod+x mode $exitmode

# switch to workspace
bindsym --to-code $mod+1 workspace number $ws1
bindsym --to-code $mod+2 workspace number $ws2
bindsym --to-code $mod+3 workspace number $ws3
bindsym --to-code $mod+4 workspace number $ws4
bindsym --to-code $mod+5 workspace number $ws5
bindsym --to-code $mod+6 workspace number $ws6
bindsym --to-code $mod+7 workspace number $ws7
bindsym --to-code $mod+8 workspace number $ws8
bindsym --to-code $mod+9 workspace number $ws9
bindsym --to-code $mod+0 workspace number $ws10

# move focused container to workspace
bindsym --to-code $mod+Shift+1 move container to workspace number $ws1
bindsym --to-code $mod+Shift+2 move container to workspace number $ws2
bindsym --to-code $mod+Shift+3 move container to workspace number $ws3
bindsym --to-code $mod+Shift+4 move container to workspace number $ws4
bindsym --to-code $mod+Shift+5 move container to workspace number $ws5
bindsym --to-code $mod+Shift+6 move container to workspace number $ws6
bindsym --to-code $mod+Shift+7 move container to workspace number $ws7
bindsym --to-code $mod+Shift+8 move container to workspace number $ws8
bindsym --to-code $mod+Shift+9 move container to workspace number $ws9
bindsym --to-code $mod+Shift+0 move container to workspace number $ws10

bindsym --to-code $mod+u workspace prev
bindsym --to-code $mod+Shift+u workspace next

# workspace_auto_back_and_forth no
bindsym --to-code $mod+Tab workspace back_and_forth

# resize window (you can also use the mouse for that)
set $resizemode "Resize: toggle [p]recize"
mode $resizemode {
    bindsym --to-code h resize shrink width 10 px or 10 ppt
    bindsym --to-code j resize grow height 10 px or 10 ppt
    bindsym --to-code k resize shrink height 10 px or 10 ppt
    bindsym --to-code l resize grow width 10 px or 10 ppt

    bindsym --to-code $mod+r mode "default"
    bindsym --to-code p mode $presizemode

    bindsym --to-code Return mode "default"
    bindsym --to-code Escape mode "default"
}
set $presizemode "Precise resize: toggle [p]resize"
mode $presizemode {
    bindsym --to-code h resize shrink width 1 px or 1 ppt
    bindsym --to-code j resize grow height 1 px or 1 ppt
    bindsym --to-code k resize shrink height 1 px or 1 ppt
    bindsym --to-code l resize grow width 1 px or 1 ppt

    bindsym --to-code $mod+r mode "default"
    bindsym --to-code p mode $resizemode

    bindsym --to-code Return mode "default"
    bindsym --to-code Escape mode "default"
}
bindsym --to-code $mod+r mode $resizemode


# Change focus between tiling / floating windows
bindsym --to-code $mod+slash focus mode_toggle

input type:keyboard {
    xkb_layout us,ru
    xkb_options grp:win_space_toggle,caps:ctrl_modifier
    xkb_model "pc101"
    repeat_delay 250
    repeat_rate 100
}
